<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./style.css">
  <script src="https://kit.fontawesome.com/bfdf924193.js" crossorigin="anonymous"></script>
  <title>Movie watch list</title>
</head>
<body>
  <main class="bg">
    <section>
      <h1>Movie watch list</h1>
      <input type="text" placeholder="Enter the movie name...!">
      <ul></ul>
    </section>
  </main>
  <script
  crossorigin
  src="https://unpkg.com/react@17/umd/react.development.js"
  >
  </script>
  <script
  crossorigin
  src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"
  >
  </script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script type="text/babel">
    let input = document.querySelector('input');
let root = document.querySelector('ul');

// state to store data

let moviesList = [];

// handle watched / unwatched

function handleToggle(event) {
  let id = event.target.dataset.id;
  moviesList[id].isWatched = !moviesList[id].isWatched;
  displayMovies(moviesList);
}

// Handling Delete

function handleDelete(event) {
  let id = event.target.dataset.id;
  moviesList.splice(id, 1);
  displayMovies(moviesList);
}



// display movies

function displayMovies(moviesArr = []) {
 let movie = moviesArr.map((elm, i) => {
    return(
      <li className="flex-1" >
        <p className="name">{elm.name}</p>
        <p>
          <span data-id={i} onClick={handleToggle}>
            { elm.isWatched ? 'Watched' : 'To Watched'}
          </span>
        </p>
        
        <span data-id={i} onClick={handleDelete}>
          Remove
        </span>
      </li>);
 });
  ReactDOM.render(movie, root);
}

// handle input

function handleInput(event) {
  if (event.keyCode === 13 && event.target.value) {
    moviesList.push({
      name: event.target.value,
      isWatched: false,
    });
    event.target.value = '';
    displayMovies(moviesList);
  }
}

input.addEventListener('keyup', handleInput);

displayMovies(moviesList);

</script>

</body>
</html>